# HTTP协议
【TOC】
## 前言
### 5层协议
#### 1，物理层（硬件）
#### 2，数据链路层
```
主机间的传输
比特（0，1）
```
#### 3，网络层
```
分组转发
路由选择
```
#### 4，传输层（TCP/IP,UDP）
```
端对端的，如自己的主机到某个网址
```
#### 5, 应用层（HTTP,FTP）
```
构建于TCP/IP协议之上，为应用软件提供服务
```

### HTTP协议简介
```
目前通用版本是HTTP/1.1版本

HTTP/0.9:
只有一个GET命令
没有持久连接（服务器发送完毕，就关闭TCP连接）
没有pipeline（同一个连接里发送多个请求）

HTTP/1.0:
增加了status code和header
增加了命令和字符集
增加了多部分发送
增加了权限和缓存

HTTP/1.1:
增加了持久链接
增加了host

HTTP/2:
将传输形式由以前的字符串转换成二进制形式（同一连接里发送多个请求无需按照顺序来执行）
头信息压缩
推送（并行执行）

HTTPS:
安全版本
```

## HTTP协议三次握手（三次网络传输）
```
主要规避网络延迟导致服务器开销的问题

名词解释（个人解释，具体理解请参考原单词）：
1，SYN：同步
2，ACK：反馈
3，send：发送状态
4，recived：接收状态
5，established：确定状态

第一次握手：
client发送SYN(J)给sever，等待sever的ACK回复，进入SYN-send状态

第二次握手：
sever接收到SYN(J)，返回一个ACK(J+1),并发送一个自己的SYN(K)包，等待slient的ACK回复，进入SYN-recived状态

第三次握手：
client接收到sever发回的SYN(J+1)包后，进入established状态,然后接收sever发来的SYN(K),并返回给sever端一个ACK(K+1),后把sever状态设置为established状态

为什么要三次握手？
因为服务器如果创建失败了，自己不知道，会导致服务器一直开销
```

## URL详解
```
https://github.com:80/ajun568?id=1#hash

https：协议
github.com：域名（找到服务器所在物联网的位置）
80：端口，默认80，可省略（每个服务器都有很多个端口，但端口不方便记忆，所以用域名来区分，而不是端口）
/ajun568：路由
?id=1：query，用来传值，如修改时传ID
#hash：哈希，文档中的片段，用来锚点定义

URN：不成熟，内容更换位置还能找到
```

## HTTP状态值和状态码
```
状态值(readyState):ajax的运行步骤
状态码(status):服务器对请求的反馈

readyState:对于访问XHR(XMLHttpRequest)并不是一次请求的，而是经历多种状态后取得的结果
    0:(未初始化)还没有调用send()方法
    1:(载入)已经发送send()方法，正在发送请求
    2:(载入完成)send()方法执行完成，已经接收到全部响应内容
    3:(交互)正在解析响应内容
    4:(完成)响应内容解析完成，可以在客户端调用了
status
    2xx:表示成功处理请求
        200:请求成功
    3xx:请求重定向和缓存(浏览器直接跳转)
        301:永久重定向
        302:临时重定向
        304:缓存(服务器告诉客户，原来缓存的内容还可以继续使用)
    4xx:客户端请求错误
        401:请求授权失败(被请求的页面需要用户名和密码)
        403:服务器拒绝访问
        404:资源找不到
    5xx:服务器端请求错误
        500:服务器内部错误
```